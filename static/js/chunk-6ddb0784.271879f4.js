(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6ddb0784"],{"09f4":function(e,t,s){"use strict";s.d(t,"a",(function(){return l})),Math.easeInOutQuad=function(e,t,s,a){return e/=a/2,e<1?s/2*e*e+t:(e--,-s/2*(e*(e-2)-1)+t)};var a=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function n(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function i(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function l(e,t,s){var l=i(),o=e-l,r=20,p=0;t="undefined"===typeof t?500:t;var d=function(){p+=r;var e=Math.easeInOutQuad(p,l,o,t);n(e),p<t?a(d):s&&"function"===typeof s&&s()};d()}},"1d11":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("div",{staticClass:"filter-container"},[s("el-form",{attrs:{inline:!0,"v-model":e.listQuery}},[s("el-form-item",{attrs:{label:"用户ID"}},[s("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"用户ID"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getList(t)}},model:{value:e.listQuery.userId,callback:function(t){e.$set(e.listQuery,"userId",t)},expression:"listQuery.userId"}})],1),s("el-form-item",{attrs:{label:"消息类型"}},[s("el-select",{staticClass:"filter-item",staticStyle:{width:"110px","margin-left":"10px"},attrs:{placeholder:"消息类型",clearable:""},on:{change:e.getList},model:{value:e.listQuery.isFrozen,callback:function(t){e.$set(e.listQuery,"isFrozen",t)},expression:"listQuery.isFrozen"}},e._l(e.messageTypeList,(function(e){return s("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})})),1)],1),s("el-form-item",{attrs:{label:"是否阅读"}},[s("el-select",{staticClass:"filter-item",staticStyle:{width:"110px","margin-left":"10px"},attrs:{placeholder:"是否阅读",clearable:""},on:{change:e.getList},model:{value:e.listQuery.isRegister,callback:function(t){e.$set(e.listQuery,"isRegister",t)},expression:"listQuery.isRegister"}},e._l(e.statusList,(function(e){return s("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})})),1)],1)],1),s("el-button",{staticClass:"filter-item",attrs:{type:"primary"},on:{click:e.sendMsgAppointUserHandler}},[e._v(" 指定用户发送消息 ")]),s("el-button",{staticClass:"filter-item",attrs:{type:"success"},on:{click:e.sendMsgBroadcaseHandler}},[e._v(" 发送广播消息 ")])],1),s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:"",fit:"","highlight-current-row":""}},[s("el-table-column",{attrs:{label:"ID",prop:"id",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[s("span",[e._v(e._s(a.id))])]}}])}),s("el-table-column",{attrs:{label:"用户",width:"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[s("span",[e._v(e._s(a.user.userNick)+"("+e._s(a.userId)+")")])]}}])}),s("el-table-column",{attrs:{label:"消息类型",width:"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return["system"==a.messageType?s("span",[e._v("系统消息")]):e._e()]}}])}),s("el-table-column",{attrs:{label:"消息标题",width:"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[s("span",[e._v(e._s(a.messageTitle))])]}}])}),s("el-table-column",{attrs:{label:"消息内容",width:"300px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[s("span",[e._v(e._s(a.messageContent))])]}}])}),s("el-table-column",{attrs:{label:"是否已读",width:"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[0==a.isRead?s("el-tag",{attrs:{type:"info"}},[e._v("否")]):e._e(),1==a.isRead?s("el-tag",{attrs:{type:"success"}},[e._v("是")]):e._e()]}}])})],1),s("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.listQuery.pageNo,limit:e.listQuery.pageSize},on:{"update:page":function(t){return e.$set(e.listQuery,"pageNo",t)},"update:limit":function(t){return e.$set(e.listQuery,"pageSize",t)},pagination:e.getList}}),s("el-dialog",{attrs:{title:"指定用户发送消息",visible:e.dialogAppointVisible},on:{"update:visible":function(t){e.dialogAppointVisible=t}}},[s("el-form",{ref:"sendAppointDataForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{rules:e.sendAppointRules,model:e.sendAppointTemp,"label-position":"left","label-width":"100px"}},[s("el-form-item",{attrs:{label:"用户ids",prop:"userIds"}},[s("el-input",{attrs:{type:"textarea",rows:{minRows:2},placeholder:"用户id 逗号分隔"},model:{value:e.sendAppointTemp.userIds,callback:function(t){e.$set(e.sendAppointTemp,"userIds",t)},expression:"sendAppointTemp.userIds"}})],1),s("el-form-item",{attrs:{label:"消息类型",prop:"messageType"}},[s("el-select",{staticClass:"filter-item",staticStyle:{width:"110px"},attrs:{placeholder:"消息类型",clearable:""},model:{value:e.sendAppointTemp.messageType,callback:function(t){e.$set(e.sendAppointTemp,"messageType",t)},expression:"sendAppointTemp.messageType"}},e._l(e.messageTypeList,(function(e){return s("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})})),1)],1),s("el-form-item",{attrs:{label:"消息标题",prop:"messageTitle"}},[s("el-input",{attrs:{placeholder:"消息标题"},model:{value:e.sendAppointTemp.messageTitle,callback:function(t){e.$set(e.sendAppointTemp,"messageTitle",t)},expression:"sendAppointTemp.messageTitle"}})],1),s("el-form-item",{attrs:{label:"消息内容",prop:"messageContent"}},[s("el-input",{attrs:{type:"textarea",rows:{minRows:2},placeholder:"消息内容"},model:{value:e.sendAppointTemp.messageContent,callback:function(t){e.$set(e.sendAppointTemp,"messageContent",t)},expression:"sendAppointTemp.messageContent"}})],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v(" 取消 ")]),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.sendAppointMsg()}}},[e._v(" 确定 ")])],1)],1),s("el-dialog",{attrs:{title:"发送广播消息",visible:e.dialogBroadcastVisible},on:{"update:visible":function(t){e.dialogBroadcastVisible=t}}},[s("el-form",{ref:"sendBroadcastDataForm",staticStyle:{width:"1000px","margin-left":"50px"},attrs:{rules:e.sendBroadcastRules,model:e.sendBroadcastTemp,"label-position":"left","label-width":"150px"}},[s("el-form-item",{attrs:{label:"是否只发送注册用户"}},[s("el-select",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"是否只发送注册用户",clearable:""},model:{value:e.sendBroadcastTemp.isOnlySendRegisterUser,callback:function(t){e.$set(e.sendBroadcastTemp,"isOnlySendRegisterUser",t)},expression:"sendBroadcastTemp.isOnlySendRegisterUser"}},e._l(e.statusList,(function(e){return s("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})})),1)],1),s("el-form-item",{attrs:{label:"消息类型",prop:"messageType"}},[s("el-select",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"消息类型",clearable:""},model:{value:e.sendBroadcastTemp.messageType,callback:function(t){e.$set(e.sendBroadcastTemp,"messageType",t)},expression:"sendBroadcastTemp.messageType"}},e._l(e.messageTypeList,(function(e){return s("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})})),1)],1),s("div",{staticClass:"block-info"},e._l(e.sendBroadcastTemp.messageTitleMap,(function(t,a){return s("el-form-item",{key:a,staticClass:"block-info-item",attrs:{label:"消息标题("+("cn"==a?"中文":"en"==a?"英文":"tw"==a?"繁体":"ru"==a?"俄文":"")+")",prop:"messageTitleMap"}},[s("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入消息标题"},model:{value:e.sendBroadcastTemp.messageTitleMap[a],callback:function(t){e.$set(e.sendBroadcastTemp.messageTitleMap,a,t)},expression:"sendBroadcastTemp.messageTitleMap[key]"}})],1)})),1),s("div",{staticClass:"block-info"},e._l(e.sendBroadcastTemp.messageContentMap,(function(t,a){return s("el-form-item",{key:a,staticClass:"block-info-item",attrs:{label:"消息内容("+("cn"==a?"中文":"en"==a?"英文":"tw"==a?"繁体":"ru"==a?"俄文":"")+")",prop:"messageContentMap"}},[s("el-input",{staticStyle:{width:"200px"},attrs:{type:"textarea",rows:{minRows:2},placeholder:"请输入消息内容"},model:{value:e.sendBroadcastTemp.messageContentMap[a],callback:function(t){e.$set(e.sendBroadcastTemp.messageContentMap,a,t)},expression:"sendBroadcastTemp.messageContentMap[key]"}})],1)})),1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v(" 取消 ")]),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.sendBroadcastMsg()}}},[e._v(" 确定 ")])],1)],1)],1)},n=[],i=s("b775");function l(e){return Object(i["a"])({url:"/message/pageListBy",method:"post",data:e})}function o(e){return Object(i["a"])({url:"/message/sendAppointUser",method:"post",data:e})}function r(e){return Object(i["a"])({url:"/message/sendBroadcast",method:"post",data:e})}var p=s("333d"),d={name:"BizMessage",components:{Pagination:p["a"]},data:function(){return{listQuery:{pageNo:1,pageSize:20,userId:"",messageType:"",isRead:""},total:0,statusList:[{key:0,value:"否"},{key:1,value:"是"}],messageTypeList:[{key:"system",value:"系统消息"}],list:null,dialogAppointVisible:!1,dialogBroadcastVisible:!1,sendAppointTemp:{},sendBroadcastTemp:{},sendAppointRules:{userIds:[{required:!0,message:"用户ids不能为空",trigger:"blur"}],messageType:[{required:!0,message:"消息类型不能为空",trigger:"blur"}],messageTitle:[{required:!0,message:"消息标题不能为空",trigger:"blur"}],messageContent:[{required:!0,message:"消息内容不能为空",trigger:"blur"}]},sendBroadcastRules:{messageType:[{required:!0,message:"消息类型不能为空",trigger:"blur"}],messageTitleMap:[{required:!0,message:"消息标题(英文)不能为空",trigger:"blur"}],messageContentMap:[{required:!0,message:"消息内容(英文)不能为空",trigger:"blur"}]}}},created:function(){this.getList()},methods:{getList:function(){var e=this;l(this.listQuery).then((function(t){e.list=t.data.records,e.total=t.data.total}))},sendMsgAppointUserHandler:function(){this.sendAppointTemp={userIds:"",messageType:"",messageTitle:"",messageContent:""},this.dialogAppointVisible=!0},sendMsgBroadcaseHandler:function(){this.sendBroadcastTemp={isOnlySendRegisterUser:"",messageType:"",messageTitleMap:{tw:"",en:"",cn:""},messageContentMap:{tw:"",en:"",cn:""}},this.dialogBroadcastVisible=!0},sendAppointMsg:function(){var e=this;this.$refs["sendAppointDataForm"].validate((function(t){t&&o(e.sendAppointTemp).then((function(t){e.getList(),e.dialogAppointVisible=!1,e.$notify({title:"成功",message:"发送成功",type:"success",duration:2e3})}))}))},sendBroadcastMsg:function(){var e=this;this.$refs["sendBroadcastDataForm"].validate((function(t){t&&r(e.sendBroadcastTemp).then((function(t){e.getList(),e.dialogBroadcastVisible=!1,e.$notify({title:"成功",message:"发送成功",type:"success",duration:2e3})}))}))}}},c=d,u=(s("ba87"),s("2877")),m=Object(u["a"])(c,a,n,!1,null,"0bda1948",null);t["default"]=m.exports},ba87:function(e,t,s){"use strict";s("d543")},d543:function(e,t,s){}}]);